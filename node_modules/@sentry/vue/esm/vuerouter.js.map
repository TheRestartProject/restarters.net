{"version":3,"file":"vuerouter.js","sourceRoot":"","sources":["../src/vuerouter.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,gBAAgB,EAAE,MAAM,iBAAiB,CAAC;AAYnD,IAAI,SAAS,GAAG,IAAI,CAAC;AAErB;;;;GAIG;AACH,MAAM,UAAU,wBAAwB,CAAC,MAAiB;IACxD,OAAO,UACL,gBAA0E,EAC1E,0BAA0C,EAC1C,gCAAgD;QADhD,2CAAA,EAAA,iCAA0C;QAC1C,iDAAA,EAAA,uCAAgD;QAEhD,MAAM,CAAC,OAAO,CAAC,UAAA,KAAK,IAAI,OAAA,gBAAgB,CAAC,KAAK,CAAC,EAAvB,CAAuB,CAAC,CAAC;QAEjD,IAAM,IAAI,GAAG;YACX,yBAAyB,EAAE,YAAY;SACxC,CAAC;QAEF,MAAM,CAAC,UAAU,CAAC,UAAC,EAAE,EAAE,KAAK,EAAE,IAAI;YAChC,IAAM,IAAI,GAAG;gBACX,MAAM,EAAE,EAAE,CAAC,MAAM;gBACjB,KAAK,EAAE,EAAE,CAAC,KAAK;aAChB,CAAC;YAEF,IAAI,0BAA0B,IAAI,SAAS,EAAE;gBAC3C,gBAAgB,CAAC;oBACf,IAAI,EAAE,EAAE,CAAC,IAAI,IAAI,EAAE,CAAC,IAAI;oBACxB,EAAE,EAAE,UAAU;oBACd,IAAI,MAAA;oBACJ,IAAI,MAAA;iBACL,CAAC,CAAC;aACJ;YAED,IAAI,gCAAgC,IAAI,CAAC,SAAS,EAAE;gBAClD,gBAAgB,CAAC;oBACf,IAAI,EAAE,EAAE,CAAC,IAAI,IAAI,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,EAAE,CAAC,IAAI;oBAC9C,EAAE,EAAE,YAAY;oBAChB,IAAI,MAAA;oBACJ,IAAI,MAAA;iBACL,CAAC,CAAC;aACJ;YAED,SAAS,GAAG,KAAK,CAAC;YAClB,IAAI,EAAE,CAAC;QACT,CAAC,CAAC,CAAC;IACL,CAAC,CAAC;AACJ,CAAC","sourcesContent":["import { captureException } from '@sentry/browser';\nimport { Transaction, TransactionContext } from '@sentry/types';\nimport VueRouter from 'vue-router';\n\nexport type Action = 'PUSH' | 'REPLACE' | 'POP';\n\nexport type VueRouterInstrumentation = <T extends Transaction>(\n  startTransaction: (context: TransactionContext) => T | undefined,\n  startTransactionOnPageLoad?: boolean,\n  startTransactionOnLocationChange?: boolean,\n) => void;\n\nlet firstLoad = true;\n\n/**\n * Creates routing instrumentation for Vue Router v2\n *\n * @param router The Vue Router instance that is used\n */\nexport function vueRouterInstrumentation(router: VueRouter): VueRouterInstrumentation {\n  return (\n    startTransaction: (context: TransactionContext) => Transaction | undefined,\n    startTransactionOnPageLoad: boolean = true,\n    startTransactionOnLocationChange: boolean = true,\n  ) => {\n    router.onError(error => captureException(error));\n\n    const tags = {\n      'routing.instrumentation': 'vue-router',\n    };\n\n    router.beforeEach((to, _from, next) => {\n      const data = {\n        params: to.params,\n        query: to.query,\n      };\n\n      if (startTransactionOnPageLoad && firstLoad) {\n        startTransaction({\n          name: to.name || to.path,\n          op: 'pageload',\n          tags,\n          data,\n        });\n      }\n\n      if (startTransactionOnLocationChange && !firstLoad) {\n        startTransaction({\n          name: to.name || to.matched[0].path || to.path,\n          op: 'navigation',\n          tags,\n          data,\n        });\n      }\n\n      firstLoad = false;\n      next();\n    });\n  };\n}\n"]}