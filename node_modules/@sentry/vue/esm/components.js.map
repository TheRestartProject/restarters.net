{"version":3,"file":"components.js","sourceRoot":"","sources":["../../src/components.ts"],"names":[],"mappings":"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","sourcesContent":["import { ViewModel } from './types';\n\n// Vendored directly from https://github.com/vuejs/vue/blob/master/src/core/util/debug.js with types only changes.\nconst classifyRE = /(?:^|[-_])(\\w)/g;\nconst classify = (str: string): string => str.replace(classifyRE, c => c.toUpperCase()).replace(/[-_]/g, '');\n\nconst ROOT_COMPONENT_NAME = '<Root>';\nconst ANONYMOUS_COMPONENT_NAME = '<Anonymous>';\n\nconst repeat = (str: string, n: number): string => {\n  let res = '';\n  while (n) {\n    if (n % 2 === 1) {\n      res += str;\n    }\n    if (n > 1) {\n      str += str; // eslint-disable-line no-param-reassign\n    }\n    n >>= 1; // eslint-disable-line no-bitwise, no-param-reassign\n  }\n  return res;\n};\n\nexport const formatComponentName = (vm?: ViewModel, includeFile?: boolean): string => {\n  if (!vm) {\n    return ANONYMOUS_COMPONENT_NAME;\n  }\n\n  if (vm.$root === vm) {\n    return ROOT_COMPONENT_NAME;\n  }\n\n  const options = vm.$options;\n\n  let name = options.name || options._componentTag;\n  const file = options.__file;\n  if (!name && file) {\n    const match = file.match(/([^/\\\\]+)\\.vue$/);\n    if (match) {\n      name = match[1];\n    }\n  }\n\n  return (\n    (name ? `<${classify(name)}>` : ANONYMOUS_COMPONENT_NAME) + (file && includeFile !== false ? ` at ${file}` : '')\n  );\n};\n\nexport const generateComponentTrace = (vm?: ViewModel): string => {\n  if ((vm?._isVue || vm?.__isVue) && vm?.$parent) {\n    const tree = [];\n    let currentRecursiveSequence = 0;\n    while (vm) {\n      if (tree.length > 0) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const last = tree[tree.length - 1] as any;\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n        if (last.constructor === vm.constructor) {\n          currentRecursiveSequence += 1;\n          vm = vm.$parent; // eslint-disable-line no-param-reassign\n          continue;\n        } else if (currentRecursiveSequence > 0) {\n          tree[tree.length - 1] = [last, currentRecursiveSequence];\n          currentRecursiveSequence = 0;\n        }\n      }\n      tree.push(vm);\n      vm = vm.$parent; // eslint-disable-line no-param-reassign\n    }\n\n    const formattedTree = tree\n      .map(\n        (vm, i) =>\n          `${\n            (i === 0 ? '---> ' : repeat(' ', 5 + i * 2)) +\n            (Array.isArray(vm)\n              ? `${formatComponentName(vm[0])}... (${vm[1]} recursive calls)`\n              : formatComponentName(vm))\n          }`,\n      )\n      .join('\\n');\n\n    return `\\n\\nfound in\\n\\n${formattedTree}`;\n  }\n\n  return `\\n\\n(found in ${formatComponentName(vm)})`;\n};\n"]}